â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id         â”‚ clerkId         â”‚ email               â”‚ name     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user-456   â”‚ clerk_abc123    â”‚ john@example.com    â”‚ John Doe â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id        â”‚ userId    â”‚ name         â”‚ icon â”‚ color  â”‚ current â”‚ longestâ”‚
â”‚           â”‚           â”‚              â”‚      â”‚        â”‚ Streak  â”‚ Streak â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ habit-001 â”‚ user-456  â”‚ Morning Run  â”‚ ğŸƒ   â”‚ #22c55eâ”‚ 6       â”‚ 12     â”‚
â”‚ habit-002 â”‚ user-456  â”‚ Read 30 min  â”‚ ğŸ“š   â”‚ #3b82f6â”‚ 4       â”‚ 8      â”‚
â”‚ habit-003 â”‚ user-456  â”‚ Meditate     â”‚ ğŸ§˜   â”‚ #8b5cf6â”‚ 0       â”‚ 5      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜



Today is: January 20, 2024 (Saturday)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VISUAL CALENDAR (Last 7 Days)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                Jan 14  Jan 15  Jan 16  Jan 17  Jan 18  Jan 19  Jan 20      â”‚
â”‚                 Sun     Mon     Tue     Wed     Thu     Fri    TODAY       â”‚
â”‚                â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  ğŸƒ Run         âŒ      âœ…      âœ…      âœ…      âœ…      âœ…      âœ…          â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“š Read        -       âœ…      âŒ      âœ…      âœ…      âœ…      âœ…          â”‚
â”‚                                                                             â”‚
â”‚  ğŸ§˜ Meditate    -       âœ…      âœ…      âŒ      âŒ      âŒ      âŒ          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  DAILY TOTALS:                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚  Jan 14: 0/3 = 0%                                                           â”‚
â”‚  Jan 15: 3/3 = 100%                                                         â”‚
â”‚  Jan 16: 2/3 = 67%                                                          â”‚
â”‚  Jan 17: 2/3 = 67%                                                          â”‚
â”‚  Jan 18: 2/3 = 67%                                                          â”‚
â”‚  Jan 19: 2/3 = 67%                                                          â”‚
â”‚  Jan 20: 2/3 = 67% (today - Run & Read done, Meditate not)                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FUNCTION: getOverallStats()                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PURPOSE: Calculate all summary statistics for the user                     â”‚
â”‚                                                                             â”‚
â”‚  INPUT:   None (uses current user from session)                             â”‚
â”‚                                                                             â”‚
â”‚  OUTPUT:  {                                                                 â”‚
â”‚    totalHabits: 3,           // How many active habits                     â”‚
â”‚    completedToday: 2,        // How many done today                        â”‚
â”‚    totalToday: 3,            // Total habits (same as totalHabits)         â”‚
â”‚    bestStreak: 12,           // Highest streak ever across all habits      â”‚
â”‚    totalCompletions: 25,     // All-time total completions                 â”‚
â”‚    weeklyCompletionRate: 71, // % completed this week                      â”‚
â”‚    monthlyCompletionRate: 68 // % completed this month                     â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜






â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOW getOverallStats() WORKS:                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  STEP 1: Get current user                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  const user = await getOrCreateUser();                                      â”‚
â”‚  // Returns: { id: "user-456", name: "John Doe", ... }                     â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 2: Get date ranges                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  const today = getTodayDate();        // "2024-01-20"                      â”‚
â”‚  const last7Days = getLastNDays(7);   // ["2024-01-14", ..., "2024-01-20"] â”‚
â”‚  const last30Days = getLastNDays(30); // ["2023-12-22", ..., "2024-01-20"] â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 3: Get all active habits                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  SELECT * FROM habits                                                       â”‚
â”‚  WHERE userId = 'user-456' AND isActive = true                             â”‚
â”‚                                                                             â”‚
â”‚  RESULT:                                                                    â”‚
â”‚  [                                                                          â”‚
â”‚    { id: "habit-001", name: "Morning Run", longestStreak: 12, ... },       â”‚
â”‚    { id: "habit-002", name: "Read 30 min", longestStreak: 8, ... },        â”‚
â”‚    { id: "habit-003", name: "Meditate", longestStreak: 5, ... }            â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚  totalHabits = 3                                                            â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 4: Get today's completed logs                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚  SELECT * FROM habit_logs                                                   â”‚
â”‚  WHERE date = '2024-01-20' AND completed = true                            â”‚
â”‚                                                                             â”‚
â”‚  RESULT:                                                                    â”‚
â”‚  [                                                                          â”‚
â”‚    { habitId: "habit-001", date: "2024-01-20", completed: true },          â”‚
â”‚    { habitId: "habit-002", date: "2024-01-20", completed: true }           â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚  completedToday = 2 (Run and Read done, Meditate not)                      â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 5: Calculate weekly completion rate                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                             â”‚
â”‚  Week: Jan 14-20 (7 days)                                                   â”‚
â”‚  Total possible = 3 habits Ã— 7 days = 21                                    â”‚
â”‚                                                                             â”‚
â”‚  Count completed logs in this range:                                        â”‚
â”‚    Jan 14: 0                                                                â”‚
â”‚    Jan 15: 3 (Run âœ…, Read âœ…, Meditate âœ…)                                  â”‚
â”‚    Jan 16: 2 (Run âœ…, Read âŒ, Meditate âœ…)                                  â”‚
â”‚    Jan 17: 2 (Run âœ…, Read âœ…, Meditate âŒ)                                  â”‚
â”‚    Jan 18: 2 (Run âœ…, Read âœ…, Meditate âŒ)                                  â”‚
â”‚    Jan 19: 2 (Run âœ…, Read âœ…, Meditate âŒ)                                  â”‚
â”‚    Jan 20: 2 (Run âœ…, Read âœ…, Meditate âŒ)                                  â”‚
â”‚    Total: 13                                                                â”‚
â”‚                                                                             â”‚
â”‚  weeklyCompletionRate = (13 / 21) Ã— 100 = 62%                              â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 6: Find best streak                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  Look at longestStreak for each habit:                                      â”‚
â”‚    - Morning Run: 12                                                        â”‚
â”‚    - Read 30 min: 8                                                         â”‚
â”‚    - Meditate: 5                                                            â”‚
â”‚                                                                             â”‚
â”‚  bestStreak = Math.max(12, 8, 5) = 12                                      â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  FINAL OUTPUT:                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•                                                              â”‚
â”‚  {                                                                          â”‚
â”‚    totalHabits: 3,                                                          â”‚
â”‚    completedToday: 2,                                                       â”‚
â”‚    totalToday: 3,                                                           â”‚
â”‚    bestStreak: 12,                                                          â”‚
â”‚    totalCompletions: 25,      // from counting all completed logs          â”‚
â”‚    weeklyCompletionRate: 62,                                                â”‚
â”‚    monthlyCompletionRate: 68  // similar calculation for 30 days           â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WHERE getOverallStats() IS USED In UI:                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/app/(dashboard)/dashboard/page.tsx                               â”‚
â”‚  COMPONENT: <StatsCards stats={stats} />                                    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ“      â”‚ â”‚ âœ…      â”‚ â”‚ ğŸ”¥      â”‚ â”‚ ğŸ“Š      â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ 3       â”‚ â”‚ 2/3     â”‚ â”‚ 12 days â”‚ â”‚ 62%     â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ Active  â”‚ â”‚Completedâ”‚ â”‚ Best    â”‚ â”‚ This    â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ Habits  â”‚ â”‚ Today   â”‚ â”‚ Streak  â”‚ â”‚ Week    â”‚                     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚ â”‚
â”‚  â”‚       â†‘           â†‘           â†‘           â†‘                          â”‚ â”‚
â”‚  â”‚       â”‚           â”‚           â”‚           â”‚                          â”‚ â”‚
â”‚  â”‚  totalHabits  completed   bestStreak  weeklyCompletion               â”‚ â”‚
â”‚  â”‚               Today                   Rate                           â”‚ â”‚
â”‚  â”‚               /totalToday                                            â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  CODE IN PAGE:                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚                                                                             â”‚
â”‚  // In dashboard/page.tsx                                                   â”‚
â”‚  const stats = await getOverallStats();                                     â”‚
â”‚  // stats = { totalHabits: 3, completedToday: 2, ... }                     â”‚
â”‚                                                                             â”‚
â”‚  return (                                                                   â”‚
â”‚    <StatsCards stats={stats} />                                             â”‚
â”‚  );                                                                         â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  CODE IN COMPONENT:                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚                                                                             â”‚
â”‚  // In stats-cards.tsx                                                      â”‚
â”‚  function StatsCards({ stats }) {                                           â”‚
â”‚    const cards = [                                                          â”‚
â”‚      { label: "Active Habits", value: stats.totalHabits, icon: "ğŸ“" },     â”‚
â”‚      { label: "Completed", value: `${stats.completedToday}/${stats.totalToday}` },â”‚
â”‚      { label: "Best Streak", value: `${stats.bestStreak} days` },          â”‚
â”‚      { label: "This Week", value: `${stats.weeklyCompletionRate}%` },      â”‚
â”‚    ];                                                                       â”‚
â”‚                                                                             â”‚
â”‚    return cards.map(card => <CardComponent {...card} />);                   â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜





â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FUNCTION: getDailyStats(days = 7)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PURPOSE: Get completion data for each day (for bar chart)                  â”‚
â”‚                                                                             â”‚
â”‚  INPUT:   days = 7 (how many days to get)                                   â”‚
â”‚                                                                             â”‚
â”‚  OUTPUT:  Array of daily stats:                                             â”‚
â”‚  [                                                                          â”‚
â”‚    { date: "2024-01-14", completed: 0, total: 3, percentage: 0 },          â”‚
â”‚    { date: "2024-01-15", completed: 3, total: 3, percentage: 100 },        â”‚
â”‚    { date: "2024-01-16", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-17", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-18", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-19", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-20", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜




â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOW getDailyStats(7) WORKS:                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  STEP 1: Get date range                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚  const dateRange = getLastNDays(7);                                         â”‚
â”‚                                                                             â”‚
â”‚  dateRange = [                                                              â”‚
â”‚    "2024-01-14",  // 6 days ago                                            â”‚
â”‚    "2024-01-15",  // 5 days ago                                            â”‚
â”‚    "2024-01-16",  // 4 days ago                                            â”‚
â”‚    "2024-01-17",  // 3 days ago                                            â”‚
â”‚    "2024-01-18",  // 2 days ago                                            â”‚
â”‚    "2024-01-19",  // yesterday                                             â”‚
â”‚    "2024-01-20"   // today                                                 â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 2: Get user's active habits                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚  userHabits = [habit-001, habit-002, habit-003]                            â”‚
â”‚  totalHabits = 3                                                            â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 3: Get all completed logs                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚  SELECT * FROM habit_logs WHERE completed = true                            â”‚
â”‚                                                                             â”‚
â”‚  Filter to only user's habits and our date range                            â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 4: Group completions by date                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚                                                                             â”‚
â”‚  logsByDate = {                                                             â”‚
â”‚    "2024-01-14": 0,   // No completions                                    â”‚
â”‚    "2024-01-15": 3,   // All 3 habits completed                            â”‚
â”‚    "2024-01-16": 2,   // 2 of 3 completed                                  â”‚
â”‚    "2024-01-17": 2,                                                         â”‚
â”‚    "2024-01-18": 2,                                                         â”‚
â”‚    "2024-01-19": 2,                                                         â”‚
â”‚    "2024-01-20": 2,                                                         â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 5: Build output array                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚                                                                             â”‚
â”‚  For each date in dateRange:                                                â”‚
â”‚    completed = logsByDate[date] or 0                                        â”‚
â”‚    percentage = (completed / totalHabits) Ã— 100                             â”‚
â”‚                                                                             â”‚
â”‚  OUTPUT:                                                                    â”‚
â”‚  â•â•â•â•â•â•â•                                                                    â”‚
â”‚  [                                                                          â”‚
â”‚    { date: "2024-01-14", completed: 0, total: 3, percentage: 0 },          â”‚
â”‚    { date: "2024-01-15", completed: 3, total: 3, percentage: 100 },        â”‚
â”‚    { date: "2024-01-16", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-17", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-18", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-19", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    { date: "2024-01-20", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WHERE getDailyStats() IS USED In UI:                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/app/(dashboard)/dashboard/page.tsx                               â”‚
â”‚  COMPONENT: <WeeklyChart data={dailyStats} />                               â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Weekly Progress                                          Avg: 62%    â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  100%â”‚            â–ˆâ–ˆ                                                  â”‚ â”‚
â”‚  â”‚   75%â”‚            â–ˆâ–ˆ                                                  â”‚ â”‚
â”‚  â”‚   50%â”‚      â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ                   â”‚ â”‚
â”‚  â”‚   25%â”‚      â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ                   â”‚ â”‚
â”‚  â”‚    0%â”‚ â–‘â–‘   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ                   â”‚ â”‚
â”‚  â”‚      â””â”€Sunâ”€â”€Monâ”€â”€â”€Tueâ”€â”€â”€Wedâ”€â”€â”€Thuâ”€â”€â”€Friâ”€â”€â”€Satâ”€â”€â”€â”€                    â”‚ â”‚
â”‚  â”‚         â†‘    â†‘     â†‘     â†‘     â†‘     â†‘     â†‘                         â”‚ â”‚
â”‚  â”‚         â”‚    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚                         â”‚ â”‚
â”‚  â”‚         0%  100%  67%   67%   67%   67%   67%                        â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  Each bar height = percentage from getDailyStats()                   â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  CODE:                                                                      â”‚
â”‚  â”€â”€â”€â”€â”€                                                                      â”‚
â”‚                                                                             â”‚
â”‚  // In dashboard/page.tsx                                                   â”‚
â”‚  const dailyStats = await getDailyStats(7);                                 â”‚
â”‚                                                                             â”‚
â”‚  // In weekly-chart.tsx                                                     â”‚
â”‚  <BarChart data={chartData}>                                                â”‚
â”‚    <Bar dataKey="percentage" />  â† Uses percentage to set bar height       â”‚
â”‚  </BarChart>                                                                â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  HOW RECHARTS USES THE DATA:                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚                                                                             â”‚
â”‚  data = [                                                                   â”‚
â”‚    { date: "2024-01-14", percentage: 0, day: "Sun" },                      â”‚
â”‚    { date: "2024-01-15", percentage: 100, day: "Mon" },                    â”‚
â”‚    ...                                                                      â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚  <XAxis dataKey="day" />     â†’ Shows "Sun", "Mon", etc on X axis           â”‚
â”‚  <YAxis domain={[0, 100]} /> â†’ Y axis goes 0-100%                          â”‚
â”‚  <Bar dataKey="percentage" /> â†’ Bar height based on percentage             â”‚
â”‚                                                                             â”‚
â”‚  TOOLTIP (on hover):                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚ Monday          â”‚                                                        â”‚
â”‚  â”‚ 3/3 habits      â”‚ â† completed/total                                     â”‚
â”‚  â”‚ 100%            â”‚ â† percentage                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜











â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FUNCTION: getHeatmapData(days = 30)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PURPOSE: Get activity levels for heatmap (GitHub-style calendar)           â”‚
â”‚                                                                             â”‚
â”‚  INPUT:   days = 30 (how many days)                                         â”‚
â”‚                                                                             â”‚
â”‚  OUTPUT:  Array with activity level (0-4) for each day:                     â”‚
â”‚  [                                                                          â”‚
â”‚    { date: "2023-12-22", level: 0 },  // No activity                       â”‚
â”‚    { date: "2023-12-23", level: 2 },  // 50% completed                     â”‚
â”‚    { date: "2023-12-24", level: 4 },  // 100% completed                    â”‚
â”‚    ...                                                                      â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚  LEVELS:                                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                                                                   â”‚
â”‚  0 = 0% completed        â†’ Gray                                             â”‚
â”‚  1 = 1-24% completed     â†’ Light green                                      â”‚
â”‚  2 = 25-49% completed    â†’ Medium-light green                               â”‚
â”‚  3 = 50-74% completed    â†’ Medium-dark green                                â”‚
â”‚  4 = 75-100% completed   â†’ Dark green                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜




â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOW getHeatmapData(30) WORKS:                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  STEP 1: Get last 30 days                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  dateRange = getLastNDays(30);                                              â”‚
â”‚  // ["2023-12-22", "2023-12-23", ..., "2024-01-20"]                        â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 2: Get user's habits                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  totalHabits = 3                                                            â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 3: Get all completed logs                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚  Count completions per day (same as getDailyStats)                          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  STEP 4: Convert percentage to level (0-4)                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚                                                                             â”‚
â”‚  For each day:                                                              â”‚
â”‚    percentage = (completed / totalHabits) Ã— 100                             â”‚
â”‚                                                                             â”‚
â”‚    if percentage = 0          â†’ level = 0                                   â”‚
â”‚    if percentage 1-24%        â†’ level = 1                                   â”‚
â”‚    if percentage 25-49%       â†’ level = 2                                   â”‚
â”‚    if percentage 50-74%       â†’ level = 3                                   â”‚
â”‚    if percentage 75-100%      â†’ level = 4                                   â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  EXAMPLE for last 7 days:                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚                                                                             â”‚
â”‚  Jan 14: 0/3 = 0%    â†’ level = 0 (gray)                                    â”‚
â”‚  Jan 15: 3/3 = 100%  â†’ level = 4 (dark green)                              â”‚
â”‚  Jan 16: 2/3 = 67%   â†’ level = 3 (medium-dark green)                       â”‚
â”‚  Jan 17: 2/3 = 67%   â†’ level = 3                                           â”‚
â”‚  Jan 18: 2/3 = 67%   â†’ level = 3                                           â”‚
â”‚  Jan 19: 2/3 = 67%   â†’ level = 3                                           â”‚
â”‚  Jan 20: 2/3 = 67%   â†’ level = 3                                           â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  OUTPUT (last 7 days only for example):                                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                     â”‚
â”‚  [                                                                          â”‚
â”‚    { date: "2024-01-14", level: 0 },                                        â”‚
â”‚    { date: "2024-01-15", level: 4 },                                        â”‚
â”‚    { date: "2024-01-16", level: 3 },                                        â”‚
â”‚    { date: "2024-01-17", level: 3 },                                        â”‚
â”‚    { date: "2024-01-18", level: 3 },                                        â”‚
â”‚    { date: "2024-01-19", level: 3 },                                        â”‚
â”‚    { date: "2024-01-20", level: 3 },                                        â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WHERE getHeatmapData() IS USED:                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/app/(dashboard)/dashboard/page.tsx                               â”‚
â”‚  COMPONENT: <HabitHeatmap data={heatmapData} />                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Activity Heatmap                                      Last 30 days   â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”      â”‚ â”‚
â”‚  â”‚  â”‚â–‘â”‚â–‘â”‚â–ˆâ”‚â–‘â”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚      â”‚ â”‚
â”‚  â”‚  â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜      â”‚ â”‚
â”‚  â”‚   â†‘                                                           â†‘       â”‚ â”‚
â”‚  â”‚   â”‚                                                           â”‚       â”‚ â”‚
â”‚  â”‚  30 days ago                                              today       â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  Each box color based on level:                                       â”‚ â”‚
â”‚  â”‚  â–‘ = level 0 (gray)     - No activity                                â”‚ â”‚
â”‚  â”‚  â–’ = level 1-2 (light)  - Some activity                              â”‚ â”‚
â”‚  â”‚  â–ˆ = level 3-4 (dark)   - Good activity                              â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  Less â–‘â–’â–“â–ˆ More                                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  CODE:                                                                      â”‚
â”‚  â”€â”€â”€â”€â”€                                                                      â”‚
â”‚                                                                             â”‚
â”‚  // In dashboard/page.tsx                                                   â”‚
â”‚  const heatmapData = await getHeatmapData(30);                              â”‚
â”‚                                                                             â”‚
â”‚  // In habit-heatmap.tsx                                                    â”‚
â”‚  const levelColors = [                                                      â”‚
â”‚    "bg-gray-100",   // level 0                                             â”‚
â”‚    "bg-green-200",  // level 1                                             â”‚
â”‚    "bg-green-400",  // level 2                                             â”‚
â”‚    "bg-green-500",  // level 3                                             â”‚
â”‚    "bg-green-600",  // level 4                                             â”‚
â”‚  ];                                                                         â”‚
â”‚                                                                             â”‚
â”‚  {data.map(day => (                                                         â”‚
â”‚    <div                                                                     â”‚
â”‚      className={levelColors[day.level]}  â† Color based on level            â”‚
â”‚      title={`${day.date}: Level ${day.level}`}                             â”‚
â”‚    />                                                                       â”‚
â”‚  ))}                                                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FUNCTION: getBestHabits(limit = 3)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PURPOSE: Get habits with best current streaks (for highlights)             â”‚
â”‚                                                                             â”‚
â”‚  INPUT:   limit = 3 (how many to return)                                    â”‚
â”‚                                                                             â”‚
â”‚  OUTPUT:  Array of habits sorted by currentStreak (descending):             â”‚
â”‚  [                                                                          â”‚
â”‚    { id: "habit-001", name: "Morning Run", currentStreak: 6, ... },        â”‚
â”‚    { id: "habit-002", name: "Read 30 min", currentStreak: 4, ... },        â”‚
â”‚    { id: "habit-003", name: "Meditate", currentStreak: 0, ... },           â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOW getBestHabits(3) WORKS:                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SIMPLE QUERY:                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚                                                                             â”‚
â”‚  SELECT * FROM habits                                                       â”‚
â”‚  WHERE userId = 'user-456' AND isActive = true                             â”‚
â”‚  ORDER BY currentStreak DESC                                                â”‚
â”‚  LIMIT 3                                                                    â”‚
â”‚                                                                             â”‚
â”‚  Before sort:                                                               â”‚
â”‚  [                                                                          â”‚
â”‚    { name: "Morning Run", currentStreak: 6 },                              â”‚
â”‚    { name: "Read 30 min", currentStreak: 4 },                              â”‚
â”‚    { name: "Meditate", currentStreak: 0 },                                 â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚  After sort (DESC = highest first):                                         â”‚
â”‚  [                                                                          â”‚
â”‚    { name: "Morning Run", currentStreak: 6 },  â† ğŸ¥‡ Best                   â”‚
â”‚    { name: "Read 30 min", currentStreak: 4 },  â† ğŸ¥ˆ Second                 â”‚
â”‚    { name: "Meditate", currentStreak: 0 },     â† ğŸ¥‰ Third                  â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜




â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WHERE getBestHabits() IS USED:                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/app/(dashboard)/dashboard/page.tsx                               â”‚
â”‚  COMPONENT: <StreakHighlights habits={bestHabits} />                        â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ”¥ Hot Streaks                     â”‚ â”‚  ğŸ† Personal Record             â”‚â”‚
â”‚  â”‚                                     â”‚ â”‚                                 â”‚â”‚
â”‚  â”‚  ğŸ¥‡ ğŸƒ Morning Run           6 days â”‚ â”‚  ğŸƒ Morning Run                 â”‚â”‚
â”‚  â”‚  ğŸ¥ˆ ğŸ“š Read 30 min           4 days â”‚ â”‚  Longest streak ever            â”‚â”‚
â”‚  â”‚  ğŸ¥‰ ğŸ§˜ Meditate              0 days â”‚ â”‚                        12 days  â”‚â”‚
â”‚  â”‚                                     â”‚ â”‚                                 â”‚â”‚
â”‚  â”‚  â†‘ Sorted by currentStreak         â”‚ â”‚  â†‘ Highest longestStreak        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  CODE:                                                                      â”‚
â”‚  â”€â”€â”€â”€â”€                                                                      â”‚
â”‚                                                                             â”‚
â”‚  // In dashboard/page.tsx                                                   â”‚
â”‚  const bestHabits = await getBestHabits(3);                                 â”‚
â”‚                                                                             â”‚
â”‚  // In streak-highlights.tsx                                                â”‚
â”‚  {topStreaks.map((habit, index) => (                                        â”‚
â”‚    <div>                                                                    â”‚
â”‚      {index === 0 ? "ğŸ¥‡" : index === 1 ? "ğŸ¥ˆ" : "ğŸ¥‰"}                       â”‚
â”‚      {habit.icon} {habit.name}                                              â”‚
â”‚      {habit.currentStreak} days                                             â”‚
â”‚    </div>                                                                   â”‚
â”‚  ))}                                                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜




â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FUNCTION: getHabitsWithDetailedStats()                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PURPOSE: Get each habit with full statistics (for analytics page)          â”‚
â”‚                                                                             â”‚
â”‚  INPUT:   None                                                              â”‚
â”‚                                                                             â”‚
â”‚  OUTPUT:  Array of habits with extra stats:                                 â”‚
â”‚  [                                                                          â”‚
â”‚    {                                                                        â”‚
â”‚      id: "habit-001",                                                       â”‚
â”‚      name: "Morning Run",                                                   â”‚
â”‚      icon: "ğŸƒ",                                                            â”‚
â”‚      color: "#22c55e",                                                      â”‚
â”‚      currentStreak: 6,                                                      â”‚
â”‚      longestStreak: 12,                                                     â”‚
â”‚      totalCompletions: 20,    â† Total all-time                             â”‚
â”‚      completionRate: 87,       â† % of last 30 days                         â”‚
â”‚      last30Days: [true, true, false, true, ...]  â† Array of 30 booleans   â”‚
â”‚    },                                                                       â”‚
â”‚    ...                                                                      â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜




â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WHERE getHabitsWithDetailedStats() IS USED:                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/app/(dashboard)/dashboard/analytics/page.tsx                     â”‚
â”‚  SECTION: Habit Breakdown                                                   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Habit Breakdown                                                      â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  ğŸƒ Morning Run                                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ”¥ 6 day streak  â€¢  ğŸ† Best: 12  â€¢  âœ… 20 total               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Mini heatmap: â–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  87%           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                â†‘                                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                last30Days array visualized                      â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ“š Read 30 min                                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ”¥ 4 day streak  â€¢  ğŸ† Best: 8  â€¢  âœ… 15 total                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Mini heatmap: â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  73%          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  CODE:                                                                      â”‚
â”‚  â”€â”€â”€â”€â”€                                                                      â”‚
â”‚                                                                             â”‚
â”‚  // In analytics/page.tsx                                                   â”‚
â”‚  const habitsWithStats = await getHabitsWithDetailedStats();                â”‚
â”‚                                                                             â”‚
â”‚  {habitsWithStats.map(habit => (                                            â”‚
â”‚    <div>                                                                    â”‚
â”‚      <span>{habit.icon} {habit.name}</span>                                 â”‚
â”‚      <span>ğŸ”¥ {habit.currentStreak} day streak</span>                       â”‚
â”‚      <span>ğŸ† Best: {habit.longestStreak}</span>                            â”‚
â”‚      <span>âœ… {habit.totalCompletions} total</span>                         â”‚
â”‚                                                                             â”‚
â”‚      {/* Mini heatmap */}                                                   â”‚
â”‚      {habit.last30Days.slice(-14).map((completed, i) => (                   â”‚
â”‚        <div className={completed ? "bg-green-500" : "bg-gray-200"} />       â”‚
â”‚      ))}                                                                    â”‚
â”‚                                                                             â”‚
â”‚      <span>{habit.completionRate}%</span>                                   â”‚
â”‚    </div>                                                                   â”‚
â”‚  ))}                                                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENT: StatsCards                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/components/dashboard/stats-cards.tsx                             â”‚
â”‚                                                                             â”‚
â”‚  WHAT IT LOOKS LIKE:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ ğŸ“      â”‚ â”‚ âœ…      â”‚ â”‚ ğŸ”¥      â”‚ â”‚ ğŸ“Š      â”‚                           â”‚
â”‚  â”‚ 3       â”‚ â”‚ 2/3     â”‚ â”‚ 12 days â”‚ â”‚ 62%     â”‚                           â”‚
â”‚  â”‚ Active  â”‚ â”‚Completedâ”‚ â”‚ Best    â”‚ â”‚ This    â”‚                           â”‚
â”‚  â”‚ Habits  â”‚ â”‚ Today   â”‚ â”‚ Streak  â”‚ â”‚ Week    â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  PROPS IT RECEIVES:                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚  stats = {                                                                  â”‚
â”‚    totalHabits: 3,                                                          â”‚
â”‚    completedToday: 2,                                                       â”‚
â”‚    totalToday: 3,                                                           â”‚
â”‚    bestStreak: 12,                                                          â”‚
â”‚    weeklyCompletionRate: 62                                                 â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  HOW IT TRANSFORMS DATA TO UI:                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚                                                                             â”‚
â”‚  const cards = [                                                            â”‚
â”‚    {                                                                        â”‚
â”‚      label: "Active Habits",                                                â”‚
â”‚      value: stats.totalHabits,     // 3                                    â”‚
â”‚      icon: "ğŸ“"                                                             â”‚
â”‚    },                                                                       â”‚
â”‚    {                                                                        â”‚
â”‚      label: "Completed Today",                                              â”‚
â”‚      value: `${stats.completedToday}/${stats.totalToday}`,  // "2/3"       â”‚
â”‚      icon: "âœ…"                                                             â”‚
â”‚    },                                                                       â”‚
â”‚    {                                                                        â”‚
â”‚      label: "Best Streak",                                                  â”‚
â”‚      value: `${stats.bestStreak} days`,  // "12 days"                      â”‚
â”‚      icon: "ğŸ”¥"                                                             â”‚
â”‚    },                                                                       â”‚
â”‚    {                                                                        â”‚
â”‚      label: "This Week",                                                    â”‚
â”‚      value: `${stats.weeklyCompletionRate}%`,  // "62%"                    â”‚
â”‚      icon: "ğŸ“Š"                                                             â”‚
â”‚    }                                                                        â”‚
â”‚  ];                                                                         â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  SPECIAL STYLING:                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚  - If completedToday = totalToday (all done): Green ring around card       â”‚
â”‚  - If weeklyRate â‰¥ 80%: Green background                                    â”‚
â”‚  - If weeklyRate â‰¥ 50%: Yellow background                                   â”‚
â”‚  - If weeklyRate < 50%: Red background                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜





â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENT: WeeklyChart                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/components/dashboard/weekly-chart.tsx                            â”‚
â”‚                                                                             â”‚
â”‚  WHAT IT LOOKS LIKE:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Weekly Progress                                          Avg: 62%    â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  100%â”‚            â–ˆâ–ˆ                                                  â”‚ â”‚
â”‚  â”‚   75%â”‚            â–ˆâ–ˆ                                                  â”‚ â”‚
â”‚  â”‚   50%â”‚      â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ                   â”‚ â”‚
â”‚  â”‚   25%â”‚      â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ                   â”‚ â”‚
â”‚  â”‚    0%â”‚ â–‘â–‘   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ                   â”‚ â”‚
â”‚  â”‚      â””â”€Sunâ”€â”€Monâ”€â”€â”€Tueâ”€â”€â”€Wedâ”€â”€â”€Thuâ”€â”€â”€Friâ”€â”€â”€Satâ”€â”€                      â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  Legend: â–ˆâ–ˆ 75%+  â–ˆâ–ˆ 50-74%  â–‘â–‘ <50%  â–“â–“ Today                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  PROPS IT RECEIVES:                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚  data = [                                                                   â”‚
â”‚    { date: "2024-01-14", completed: 0, total: 3, percentage: 0 },          â”‚
â”‚    { date: "2024-01-15", completed: 3, total: 3, percentage: 100 },        â”‚
â”‚    { date: "2024-01-16", completed: 2, total: 3, percentage: 67 },         â”‚
â”‚    ...                                                                      â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  HOW IT TRANSFORMS DATA:                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚                                                                             â”‚
â”‚  const chartData = data.map(day => ({                                       â”‚
â”‚    ...day,                                                                  â”‚
â”‚    day: getDayName(day.date),     // "Sun", "Mon", etc                     â”‚
â”‚    isToday: isToday(day.date),    // true/false                            â”‚
â”‚  }));                                                                       â”‚
â”‚                                                                             â”‚
â”‚  chartData = [                                                              â”‚
â”‚    { date: "2024-01-14", percentage: 0, day: "Sun", isToday: false },      â”‚
â”‚    { date: "2024-01-15", percentage: 100, day: "Mon", isToday: false },    â”‚
â”‚    { date: "2024-01-16", percentage: 67, day: "Tue", isToday: false },     â”‚
â”‚    { date: "2024-01-17", percentage: 67, day: "Wed", isToday: false },     â”‚
â”‚    { date: "2024-01-18", percentage: 67, day: "Thu", isToday: false },     â”‚
â”‚    { date: "2024-01-19", percentage: 67, day: "Fri", isToday: false },     â”‚
â”‚    { date: "2024-01-20", percentage: 67, day: "Sat", isToday: true },      â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  BAR COLORS:                                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚  <Cell fill={                                                               â”‚
â”‚    entry.isToday ? "#6366f1"      // Indigo (today)                        â”‚
â”‚    : entry.percentage >= 75 ? "#22c55e"   // Green                         â”‚
â”‚    : entry.percentage >= 50 ? "#eab308"   // Yellow                        â”‚
â”‚    : "#e5e7eb"                            // Gray                          â”‚
â”‚  } />                                                                       â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  TOOLTIP (on hover):                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚ Monday          â”‚                                                        â”‚
â”‚  â”‚ 3/3 habits      â”‚ â† completed/total from data                           â”‚
â”‚  â”‚ 100%            â”‚ â† percentage                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENT: HabitHeatmap                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/components/dashboard/habit-heatmap.tsx                           â”‚
â”‚                                                                             â”‚
â”‚  WHAT IT LOOKS LIKE:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Activity Heatmap                                      Last 30 days   â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”      â”‚ â”‚
â”‚  â”‚  â”‚â–‘â”‚â–‘â”‚â–ˆâ”‚â–‘â”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–“â”‚      â”‚ â”‚
â”‚  â”‚  â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜      â”‚ â”‚
â”‚  â”‚   â†‘                                                           â†‘       â”‚ â”‚
â”‚  â”‚  30 days ago                                              today       â”‚ â”‚
â”‚  â”‚                                                         (has ring)    â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  Less â–‘â–’â–“â–ˆ More                                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  PROPS IT RECEIVES:                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚  data = [                                                                   â”‚
â”‚    { date: "2023-12-22", level: 0 },                                        â”‚
â”‚    { date: "2023-12-23", level: 2 },                                        â”‚
â”‚    { date: "2023-12-24", level: 4 },                                        â”‚
â”‚    ...                                                                      â”‚
â”‚    { date: "2024-01-20", level: 3 },  // today                             â”‚
â”‚  ]                                                                          â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  COLOR MAPPING:                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚  const levelColors = [                                                      â”‚
â”‚    "bg-gray-100",   // level 0 = 0%                                        â”‚
â”‚    "bg-green-200",  // level 1 = 1-24%                                     â”‚
â”‚    "bg-green-400",  // level 2 = 25-49%                                    â”‚
â”‚    "bg-green-500",  // level 3 = 50-74%                                    â”‚
â”‚    "bg-green-600",  // level 4 = 75-100%                                   â”‚
â”‚  ];                                                                         â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  HOW EACH BOX IS RENDERED:                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚  {data.map((day) => (                                                       â”‚
â”‚    <div                                                                     â”‚
â”‚      className={`                                                           â”‚
â”‚        w-4 h-4 rounded-sm                                                   â”‚
â”‚        ${levelColors[day.level]}                  // Color from level       â”‚
â”‚        ${isToday(day.date) ? "ring-2 ring-indigo-500" : ""}  // Today ring â”‚
â”‚      `}                                                                     â”‚
â”‚      title={`${formatDateShort(day.date)}: ${getLevelLabel(day.level)}`}   â”‚
â”‚    />                                                                       â”‚
â”‚  ))}                                                                        â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  HOVER TOOLTIP:                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚  Hovering on a box shows: "Jan 15: Great activity!" (based on level)       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENT: ProgressRing                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FILE: src/components/dashboard/progress-ring.tsx                           â”‚
â”‚                                                                             â”‚
â”‚  WHAT IT LOOKS LIKE:                                                        â”‚
â”‚                                                                             â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚        â”‚    â•­â”€â”€â”€â”€â•®    â”‚                                                     â”‚
â”‚        â”‚   â•±â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•²   â”‚  â† Green stroke (62% of circle)                    â”‚
â”‚        â”‚  â”‚  62%   â”‚  â”‚  â† Percentage in center                            â”‚
â”‚        â”‚  â”‚Completeâ”‚  â”‚  â† Label below                                     â”‚
â”‚        â”‚   â•²â–‘â–‘â–‘â–‘â–‘â–‘â•±   â”‚  â† Gray background (remaining 38%)                 â”‚
â”‚        â”‚    â•°â”€â”€â”€â”€â•¯    â”‚                                                     â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  PROPS IT RECEIVES:                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚  value = 62        // Percentage (0-100)                                    â”‚
â”‚  size = 120        // Diameter in pixels                                    â”‚
â”‚  strokeWidth = 8   // Thickness of ring                                     â”‚
â”‚  label = "Complete" // Text below percentage                                â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  HOW THE RING IS DRAWN (SVG MATH):                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚                                                                             â”‚
â”‚  1. Calculate radius:                                                       â”‚
â”‚     radius = (size - strokeWidth) / 2                                       â”‚
â”‚     radius = (120 - 8) / 2 = 56 pixels                                     â”‚
â”‚                                                                             â”‚
â”‚  2. Calculate circumference (full circle):                                  â”‚
â”‚     circumference = 2 Ã— Ï€ Ã— radius                                         â”‚
â”‚     circumference = 2 Ã— 3.14159 Ã— 56 = 351.86 pixels                       â”‚
â”‚                                                                             â”‚
â”‚  3. Calculate dash offset (how much to hide):                               â”‚
â”‚     strokeDashoffset = circumference Ã— (1 - value/100)                     â”‚
â”‚     strokeDashoffset = 351.86 Ã— (1 - 0.62) = 133.7 pixels                  â”‚
â”‚                                                                             â”‚
â”‚     This hides 38% of the circle, showing 62%!                              â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  COLOR BASED ON VALUE:                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚  if value >= 80 â†’ Green (#22c55e)                                          â”‚
â”‚  if value >= 50 â†’ Yellow (#eab308)                                          â”‚
â”‚  if value >= 25 â†’ Orange (#f97316)                                          â”‚
â”‚  if value < 25  â†’ Red (#ef4444)                                             â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  VISUAL BREAKDOWN:                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚                                                                             â”‚
â”‚  <svg>                                                                      â”‚
â”‚    {/* Background circle - full gray ring */}                               â”‚
â”‚    <circle stroke="#e5e7eb" ... />                                          â”‚
â”‚                                                                             â”‚
â”‚    {/* Progress circle - partial colored ring */}                           â”‚
â”‚    <circle                                                                  â”‚
â”‚      stroke={getColor()}   // Green for 62%                                â”‚
â”‚      strokeDasharray={circumference}   // Full circle length               â”‚
â”‚      strokeDashoffset={strokeDashoffset}  // Hide 38%                      â”‚
â”‚    />                                                                       â”‚
â”‚  </svg>                                                                     â”‚
â”‚                                                                             â”‚
â”‚  {/* Center text */}                                                        â”‚
â”‚  <div>                                                                      â”‚
â”‚    <span>62%</span>                                                         â”‚
â”‚    <span>Complete</span>                                                    â”‚
â”‚  </div>                                                                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜




â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPLETE DASHBOARD FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  USER VISITS: /dashboard                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  STEP 1: Dashboard page.tsx loads                                   â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚   â”‚
â”‚  â”‚  export default async function DashboardPage({ searchParams }) {    â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚    // Get current user                                              â”‚   â”‚
â”‚  â”‚    const user = await getOrCreateUser();                            â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚    // Get date (from URL or today)                                  â”‚   â”‚
â”‚  â”‚    const selectedDate = searchParams.date || getTodayDate();        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  STEP 2: Fetch all data in PARALLEL                                â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚   â”‚
â”‚  â”‚  const [stats, dailyStats, heatmapData, bestHabits, habits] =      â”‚   â”‚
â”‚  â”‚    await Promise.all([                                              â”‚   â”‚
â”‚  â”‚      getOverallStats(),           // For stats cards               â”‚   â”‚
â”‚  â”‚      getDailyStats(7),            // For bar chart                 â”‚   â”‚
â”‚  â”‚      getHeatmapData(30),          // For heatmap                   â”‚   â”‚
â”‚  â”‚      getBestHabits(3),            // For streak highlights         â”‚   â”‚
â”‚  â”‚      getHabitsWithStatus(date),   // For today's habits list       â”‚   â”‚
â”‚  â”‚    ]);                                                              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  WHY PARALLEL?                                                      â”‚   â”‚
â”‚  â”‚  - All 5 queries run at same time                                   â”‚   â”‚
â”‚  â”‚  - Total time = longest query (not sum of all)                     â”‚   â”‚
â”‚  â”‚  - Much faster than sequential!                                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  STEP 3: Render components with data                                â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚   â”‚
â”‚  â”‚  return (                                                           â”‚   â”‚
â”‚  â”‚    <div>                                                            â”‚   â”‚
â”‚  â”‚      {/* Welcome header */}                                         â”‚   â”‚
â”‚  â”‚      <WelcomeHeader user={user} date={selectedDate} />             â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚      {/* Stats cards */}                                            â”‚   â”‚
â”‚  â”‚      <StatsCards stats={stats} />                                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚      {/* Charts */}                                                 â”‚   â”‚
â”‚  â”‚      <WeeklyChart data={dailyStats} />                              â”‚   â”‚
â”‚  â”‚      <HabitHeatmap data={heatmapData} />                            â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚      {/* Streak highlights */}                                      â”‚   â”‚
â”‚  â”‚      <StreakHighlights habits={bestHabits} />                       â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚      {/* Date navigator */}                                         â”‚   â”‚
â”‚  â”‚      <DateNavigator currentDate={selectedDate} />                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚      {/* Today's habits */}                                         â”‚   â”‚
â”‚  â”‚      <TodayHabits habits={habits} date={selectedDate} />            â”‚   â”‚
â”‚  â”‚    </div>                                                           â”‚   â”‚
â”‚  â”‚  );                                                                 â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA â†’ UI MAPPING                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         DASHBOARD                                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Welcome back, John! ğŸ‘‹                       [+ New Habit]    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Saturday, January 20, 2024                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚        â†‘              â†‘                                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   user.name    formatDateDisplay(selectedDate)                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ“ 3    â”‚ â”‚ âœ… 2/3  â”‚ â”‚ ğŸ”¥ 12   â”‚ â”‚ ğŸ“Š 62%  â”‚  â† getOverallStats()â”‚ â”‚
â”‚  â”‚  â”‚ Active  â”‚ â”‚Completedâ”‚ â”‚ Best    â”‚ â”‚ This    â”‚                    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â”‚
â”‚  â”‚       â†‘          â†‘          â†‘           â†‘                           â”‚  â”‚
â”‚  â”‚  totalHabits  completed  bestStreak  weeklyRate                     â”‚  â”‚
â”‚  â”‚               Today/total                                            â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚     Weekly Chart               â”‚      Heatmap                   â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”  â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â–ˆâ–ˆ                     â”‚   â”‚  â”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–‘â”‚â–‘â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚  â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ   â”‚   â”‚  â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜  â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Sun Mon Tue Wed Thu Fri â”‚   â”‚         â†‘                      â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    getHeatmapData(30)          â”‚â”‚  â”‚
â”‚  â”‚  â”‚         â†‘                      â”‚                                â”‚â”‚  â”‚
â”‚  â”‚  â”‚    getDailyStats(7)            â”‚                                â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ”¥ Hot Streaks                â”‚  ğŸ† Personal Best              â”‚â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ¥‡ Morning Run     6 days     â”‚  Morning Run                   â”‚â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ¥ˆ Read 30 min     4 days     â”‚  12 days                       â”‚â”‚  â”‚
â”‚  â”‚  â”‚         â†‘                      â”‚         â†‘                      â”‚â”‚  â”‚
â”‚  â”‚  â”‚    getBestHabits(3)            â”‚    max(longestStreak)          â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  â—€   Saturday, January 20, 2024   â–¶                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚              Today                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â†‘                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    DateNavigator uses selectedDate                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Today's Habits                                        2/3     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  67%   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ğŸƒ Morning Run  ğŸ”¥ 6 days                              [âœ“]   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“š Read 30 min  ğŸ”¥ 4 days                              [âœ“]   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ§˜ Meditate     ğŸ’¤ 0 days                              [ ]   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚         â†‘                                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    getHabitsWithStatus(selectedDate)                            â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜




â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QUICK REFERENCE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  FUNCTION                    COMPONENT              UI ELEMENT              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                             â”‚
â”‚  getOverallStats()     â†’     StatsCards      â†’     4 stat boxes at top     â”‚
â”‚    â”œâ”€ totalHabits            â””â”€ Card 1             "ğŸ“ 3 Active Habits"    â”‚
â”‚    â”œâ”€ completedToday         â””â”€ Card 2             "âœ… 2/3 Completed"      â”‚
â”‚    â”œâ”€ bestStreak             â””â”€ Card 3             "ğŸ”¥ 12 days Best"       â”‚
â”‚    â””â”€ weeklyRate             â””â”€ Card 4             "ğŸ“Š 62% This Week"      â”‚
â”‚                                                                             â”‚
â”‚  getDailyStats(7)      â†’     WeeklyChart     â†’     Bar chart               â”‚
â”‚    â””â”€ [{date, %, ...}]       â””â”€ BarChart           7 bars, one per day     â”‚
â”‚                                                                             â”‚
â”‚  getHeatmapData(30)    â†’     HabitHeatmap    â†’     GitHub-style grid       â”‚
â”‚    â””â”€ [{date, level}]        â””â”€ Grid               30 colored boxes        â”‚
â”‚                                                                             â”‚
â”‚  getBestHabits(3)      â†’     StreakHighlights â†’    Hot streaks section     â”‚
â”‚    â””â”€ [habits sorted]        â””â”€ Cards              ğŸ¥‡ğŸ¥ˆğŸ¥‰ rankings         â”‚
â”‚                                                                             â”‚
â”‚  getHabitsWithStatus() â†’     TodayHabits     â†’     Habits list             â”‚
â”‚    â””â”€ [habits + status]      â””â”€ Cards + Buttons    Check-in interface      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KEY POINTS TO REMEMBER                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. SERVER FUNCTIONS (analytics.ts)                                         â”‚
â”‚     - Run on server, access database directly                               â”‚
â”‚     - Return plain JavaScript objects                                       â”‚
â”‚     - Called from page.tsx (server component)                               â”‚
â”‚                                                                             â”‚
â”‚  2. PARALLEL DATA FETCHING                                                  â”‚
â”‚     - Promise.all() runs all queries at once                                â”‚
â”‚     - Much faster than one-by-one                                           â”‚
â”‚     - All data ready before rendering                                       â”‚
â”‚                                                                             â”‚
â”‚  3. DATA TRANSFORMATION                                                     â”‚
â”‚     - Functions return raw data                                             â”‚
â”‚     - Components transform for display                                      â”‚
â”‚     - e.g., date "2024-01-20" â†’ day name "Sat"                             â”‚
â”‚                                                                             â”‚
â”‚  4. RECHARTS LIBRARY                                                        â”‚
â”‚     - BarChart uses data array                                              â”‚
â”‚     - dataKey props specify which field to use                              â”‚
â”‚     - Tooltip shows on hover                                                â”‚
â”‚                                                                             â”‚
â”‚  5. SVG FOR CUSTOM GRAPHICS                                                 â”‚
â”‚     - Progress ring uses SVG circles                                        â”‚
â”‚     - strokeDasharray/offset create partial circles                         â”‚
â”‚     - Math converts percentage to visual                                    â”‚
â”‚                                                                             â”‚
â”‚  6. HEATMAP LEVELS                                                          â”‚
â”‚     - Percentage â†’ Level (0-4)                                              â”‚
â”‚     - Level â†’ Color (gray to dark green)                                    â”‚
â”‚     - Same concept as GitHub contribution graph                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜